<div class="container">
  <h2>{{ getTitle() }}</h2>

  <div *ngIf="isLoading" class="loading">Đang tải dữ liệu...</div>

  <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

  <div *ngIf="!isLoading && !errorMessage" class="detail-container">
    <!-- View Mode -->
    <div *ngIf="mode === 'view'" class="view-mode">
      <div class="detail-row">
        <label>Tên sách:</label>
        <span>{{ book.BookName }}</span>
      </div>

      <div class="detail-row">
        <label>Giá bán:</label>
        <span>{{ book.Price | number: '1.2-2' }} VNĐ</span>
      </div>

      <div class="detail-row">
        <label>Mô tả:</label>
        <span>{{ book.Description }}</span>
      </div>

      <div class="detail-row">
        <label>Ảnh bìa:</label>
        <div class="image-preview">
          <img [src]="getImageUrl()" [alt]="book.BookName" />
          <span class="image-name">{{ book.Image }}</span>
        </div>
      </div>

      <div class="detail-row">
        <label>Ngày cập nhật:</label>
        <span>{{ formatDate(book.DayUpdated) }}</span>
      </div>

      <div class="detail-row">
        <label>Số lượng tồn:</label>
        <span>{{ book.StockQuantity }}</span>
      </div>

      <div class="detail-row">
        <label>Mã chủ đề:</label>
        <span>{{ book.CategoryId }}</span>
      </div>

      <div class="detail-row">
        <label>Mã NXB:</label>
        <span>{{ book.NXBId }}</span>
      </div>

      <div class="button-group">
        <button class="btn-edit" (click)="enableEdit()">Chỉnh sửa</button>
        <button class="btn-cancel" (click)="cancel()">Quay lại</button>
      </div>
    </div>

    <!-- Edit/Create Mode -->
    <div *ngIf="mode === 'edit' || mode === 'create'" class="edit-mode">
      <div class="form-group">
        <label>Tên sách: <span class="required">*</span></label>
        <input type="text" [(ngModel)]="book.BookName" class="form-control" />
      </div>

      <div class="form-group">
        <label>Giá bán: <span class="required">*</span></label>
        <input type="number" [(ngModel)]="book.Price" class="form-control" />
      </div>

      <div class="form-group">
        <label>Mô tả: <span class="required">*</span></label>
        <textarea [(ngModel)]="book.Description" class="form-control" rows="5"></textarea>
      </div>

      <div class="form-group">
        <label>Tên file ảnh: <span class="required">*</span></label>
        <input
          type="text"
          [(ngModel)]="book.Image"
          class="form-control"
          placeholder="VD: THCB.jpg"
        />
        <small>Nhập tên file ảnh (ảnh cần được đặt trong thư mục my-app/src/assets/images/)</small>

        <div class="form-group">
          <label>Số lượng tồn: <span class="required">*</span></label>
          <input type="number" [(ngModel)]="book.StockQuantity" class="form-control" />
        </div>

        <div class="form-group">
          <label>Mã chủ đề:</label>
          <input type="text" [(ngModel)]="book.CategoryId" class="form-control" />
        </div>

        <div class="form-group">
          <label>Mã NXB:</label>
          <input type="text" [(ngModel)]="book.NXBId" class="form-control" />
        </div>

        <div class="button-group">
          <button class="btn-save" (click)="saveBook()">Lưu</button>
          <button class="btn-cancel" (click)="cancel()">Hủy</button>
        </div>
      </div>
    </div>
  </div>
</div>
